<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="我的博客">
<meta property="og:url" content="/page/17/index.html">
<meta property="og:site_name" content="我的博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我的博客">

<link rel="canonical" href="/page/17/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>我的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">我的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="/2021/03/02/leetcode/301.删除无效括号/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hezhengkui">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/02/leetcode/301.删除无效括号/" class="post-title-link" itemprop="url">301.删除无效括号</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-02 10:48:21" itemprop="dateCreated datePublished" datetime="2021-03-02T10:48:21+08:00">2021-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-05-17 10:15:20" itemprop="dateModified" datetime="2021-05-17T10:15:20+08:00">2021-05-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="https://leetcode-cn.com/problems/remove-invalid-parentheses" target="_blank" rel="noopener">https://leetcode-cn.com/problems/remove-invalid-parentheses</a></p>
<p>删除最小数量的无效括号，使得输入的字符串有效，返回所有可能的结果。</p>
<p>说明: 输入可能包含了除 ( 和 ) 以外的字符。</p>
<p>示例 1:</p>
<p>​        输入: “()())()”<br>​        输出: [“()()()”, “(())()”]</p>
<p>示例 2:</p>
<p>​        输入: “(a)())()”<br>​        输出: [“(a)()()”, “(a())()”]</p>
<p>示例 3:</p>
<p>​        输入: “)(“<br>​        输出: [“”]</p>
<p>使用回溯+剪枝方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">char</span>[] charArray;</span><br><span class="line">        <span class="keyword">private</span> Set&lt;String&gt; validExpressions = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">removeInvalidParentheses</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.len = s.length();</span><br><span class="line">            <span class="keyword">this</span>.charArray = s.toCharArray();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 第 1 步：遍历一次，计算多余的左右括号</span></span><br><span class="line">            <span class="keyword">int</span> leftRemove = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> rightRemove = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (charArray[i] == <span class="string">'('</span>) &#123;</span><br><span class="line">                    leftRemove++;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (charArray[i] == <span class="string">')'</span>) &#123;</span><br><span class="line">                    <span class="comment">// 遇到右括号的时候，须要根据已经存在的左括号数量决定</span></span><br><span class="line">                    <span class="keyword">if</span> (leftRemove == <span class="number">0</span>) &#123;</span><br><span class="line">                        rightRemove++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (leftRemove &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="comment">// 关键：一个右括号出现可以抵销之前遇到的左括号</span></span><br><span class="line">                        leftRemove--;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 第 2 步：回溯算法，尝试每一种可能的删除操作</span></span><br><span class="line">            StringBuilder path = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, leftRemove, rightRemove, path);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="keyword">this</span>.validExpressions);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> index       当前遍历到的下标</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> leftCount   已经遍历到的左括号的个数</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> rightCount  已经遍历到的右括号的个数</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> leftRemove  最少应该删除的左括号的个数</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> rightRemove 最少应该删除的右括号的个数</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> path        一个可能的结果</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span> leftCount, <span class="keyword">int</span> rightCount, <span class="keyword">int</span> leftRemove, <span class="keyword">int</span> rightRemove, StringBuilder path)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (index == len) &#123;</span><br><span class="line">                <span class="keyword">if</span> (leftRemove == <span class="number">0</span> &amp;&amp; rightRemove == <span class="number">0</span>) &#123;</span><br><span class="line">                    validExpressions.add(path.toString());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">char</span> character = charArray[index];</span><br><span class="line">            <span class="comment">// 可能的操作 1：删除当前遍历到的字符</span></span><br><span class="line">            <span class="keyword">if</span> (character == <span class="string">'('</span> &amp;&amp; leftRemove &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 由于 leftRemove &gt; 0，并且当前遇到的是左括号，因此可以尝试删除当前遇到的左括号</span></span><br><span class="line">                dfs(index + <span class="number">1</span>, leftCount, rightCount, leftRemove - <span class="number">1</span>, rightRemove, path);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (character == <span class="string">')'</span> &amp;&amp; rightRemove &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 由于 rightRemove &gt; 0，并且当前遇到的是右括号，因此可以尝试删除当前遇到的右括号</span></span><br><span class="line">                dfs(index + <span class="number">1</span>, leftCount, rightCount, leftRemove, rightRemove - <span class="number">1</span>, path);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 可能的操作 2：保留当前遍历到的字符</span></span><br><span class="line">            path.append(character);</span><br><span class="line">            <span class="keyword">if</span> (character != <span class="string">'('</span> &amp;&amp; character != <span class="string">')'</span>) &#123;</span><br><span class="line">                <span class="comment">// 如果不是括号，继续深度优先遍历</span></span><br><span class="line">                dfs(index + <span class="number">1</span>, leftCount, rightCount, leftRemove, rightRemove, path);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (character == <span class="string">'('</span>) &#123;</span><br><span class="line">                <span class="comment">// 考虑左括号</span></span><br><span class="line">                dfs(index + <span class="number">1</span>, leftCount + <span class="number">1</span>, rightCount, leftRemove, rightRemove, path);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (leftCount &gt; rightCount) &#123;<span class="comment">//这里不能是 character == ')'， 还有可能是字母</span></span><br><span class="line">                <span class="comment">// 考虑右括号</span></span><br><span class="line">                dfs(index + <span class="number">1</span>, leftCount, rightCount + <span class="number">1</span>, leftRemove, rightRemove, path);</span><br><span class="line">            &#125;</span><br><span class="line">            path.deleteCharAt(path.length() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="/2021/03/01/面试题/面试题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hezhengkui">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/01/面试题/面试题/" class="post-title-link" itemprop="url">面试题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-01 18:45:02" itemprop="dateCreated datePublished" datetime="2021-03-01T18:45:02+08:00">2021-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-26 16:50:00" itemprop="dateModified" datetime="2021-03-26T16:50:00+08:00">2021-03-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>1、自我介绍，项目介绍，遇到的难点？产生原因？如何解决？<br>2、HashMap1.8与1.7区别？ConcurrentHashMap实现原理 ？<br>3、jvm类加载器，自定义类加载器，双亲委派机制，优缺点，tomcat类加载机制?<br>4、tomcat热部署，怎么做到的热加载？<br>5、cms收集器过程，g1收集器原理，怎么实现可预测停顿的，region的大小结构？<br>6、内存溢出，内存泄漏遇到过吗？什么场景产生的，怎么解决的？<br>7、volatile的原理？synchronized和重入锁实现原理以及区别？<br>8、redis字符串实现，sds和c区别？<br>9、redis集群，为什么是16384个slot？选举过程，会有脑裂问题么，raft算法，优缺点？<br>10、redis有序集合怎么实现的，跳表是什么？往跳表添加一个元素的过程获取分数的时间复杂度，为什么不用红黑树，红黑树有什么特点，左旋右旋操作？<br>11、锁升级过程，轻量锁可以变成偏向锁么？偏向锁可以变成无锁么？对象头结构，锁状态变化过程？<br>12、Innodb的结构了解么？磁盘页和缓存区是怎么配合的？缓冲区和磁盘数据不一致怎么办，服务器突然宕机了数据会丢失么？<br>13、InnoDB 索引为什使用B+树而不是用B树？<br>14、MySQL 分表是怎么实现的？跨库join如何解决？数据量突增怎么解决？<br>15、数据库的隔离级别，怎么实现的？当前读，快照读？MVCC？<br>16、mysql优化的实践经验<br>17、分布式事务出现过不一致吗？为什么？怎么解决？有什么方法避免？怎么监控？监控到怎么处理？什么时候需要人工接入？<br>18、io模型了解么？多路复用？selete，poll，epoll，epoll的结构？怎么注册事件？<br>19、你们用的什么消息中间件，kafka，为什么用kafka？kafka是怎么保证高吞吐量的？<br>20、kafka重平衡，重启服务怎么保证kafka不发生重平衡，有什么方案？<br>21、netty的原理和使用？tcp的连接过程？一台服务器能支持多少连接，为什么 ？tcp各个参数怎么设置？<br>22、Sping的AOP实现原理，以及对象生成方式的种类，单例的还是原型的？<br>23、讲讲调度接口是怎么实现的<br>24、分布式唯一ID是怎么实现的<br>25、设计模式，以及自己使用的场景<br>26、有没有用过分布式锁，怎么实现的，讲讲原理<br>27、如何解决线上问题？cpu狂飙怎么办？频繁minor gc怎么办？可能造成的原因是什么？如何避免？<br>28、怎么理解分布式和微服务，为什么要拆分服务，会产生什么问题，怎么解决这些问题 ？<br>29、怎么理解高可用，如何保证高可用，有什么弊端，熔断机制，怎么实现 ？<br>30、对于高并发怎么看，怎么算高并发，你们项目有么，如果有会产生什么问题，怎么解决<br>31、有没有做过压测的项目？首页接口优化是怎么做的？<br>32、如何优雅的写代码？什么代码算做优雅？什么代码是规范？你们代码规范是什么样的？如何进行code review？<br>33、算法：给定一个长度为N的整形数组arr，其中有N个互不相等的自然数1-N，请实现arr的排序，但是不要把下标0∼N−1位置上的数通过直接赋值的方式替换成1∼N<br>34、算法：判断一个树是否是平衡二叉树<br>35、算法：给定一个二叉树，请计算节点值之和最大的路径的节点值之和是多少，这个路径的开始节点和结束节点可以是二叉树中的任意节点<br>36、算法：LRU 缓存<br>37、算法：实现带有getMin功能的栈，要求push，pop，getMin的时间复杂度都是O(1)<br>38、算法：两数之和<br>39、算法：实现二叉树先序，中序和后序遍历</p>
<p>1、介绍一下自己, 为什么出来看机会 ？你做的主要工作有什么？最复杂的一个业务讲一下流程？<br>2、平时用的工具链和技术栈是什么？<br>3、HashMap的并发不安全体现在哪？HashMap为什么数组要是二次幂？扩容rehash的流程？<br>4、HashMap拉链法中链表过长时变形为红黑树有什么优缺点？为什么是8为什么是6？<br>5、ConcurrentHashMap 是怎么做到并发安全的？<br>6、LSM 树了解吗? 是一种什么存储结构?<br>7、Java 有哪些锁机制？Java 中 CAS 是怎么实现的？Unsafe怎么实现？<br>8、简述一下Java 垃圾回收机制？ 如何判断一个对象是否存活？ Java 中垃圾收集的方法有哪些？<br>9、介绍一下Atomic 原子类？JUC 包中的原子类是哪4类？讲讲 AtomicInteger 的使用？AtomicInteger 类的原理？<br>10、线程池了解么？线程池的好处？线程池参数？execute执行流程？idl怎么配置的？最大线程满了之后如何处理？<br>11、tcp快速恢复，快速启动，慢启动？<br>12、MySQL 的存储引擎用的是什么?为什么选 InnoDB?  B+树和二叉树有什么区别和优劣？<br>13、考虑一个业务场景: 头条的文章的评论量非常大, 比如说一篇热门文章就有几百万的评论, 设计一个后端服务, 实现评论的时序展示与分页<br>14、假如用 id 翻页的方式, 数据库表如何设计? 索引如何设计?<br>15、假如量很大, 你觉得需要分库分表吗? 怎么分? 分库分表后怎么查询分页? 分库分表后怎么保证主键仍然是递增的?<br>16、现在需要支持深分页, 页码直接跳转, 怎么实现? 瞬时写入量很大可能会打挂存储, 怎么保护?<br>17、为什么要用 redis 而不用 map/guava 做缓存? redis 和 memcached 的区别？redis 内存淘汰机制？<br>18、用过 Redis 的哪几种数据结构？redis 设置过期时间？redis 事务？<br>19、缓存雪崩和缓存穿透问题解决方案？如何解决 Redis 的并发竞争 Key 问题？如何保证缓存与数据库双写时的数据一致性？<br>20、ZSET 是怎么实现的? zrange start, stop, 总长度为 n, 复杂度是多少?<br>21、什么是消息队列？为什么要用消息队列？JMS两种消息模型？<br>22、说一下kafka的topic，partition，broker概念？kafka的主从选举机制？<br>23、Kafka 的消费者如何做消息去重? 介绍一下 Kafka 的 ConsumerGroup？<br>24、时序型数据库的存储结构是怎么样的? 在生产中用过 Cassandra 和 RocksDB 吗? 数据量有多大? Cassandra 的墓碑机制是什么?<br>25、Spring Bean 的作用域？Spring 事务中的隔离级别？Spring 事务中的事务传播行为？<br>26、AOP是什么？IOC是什么？<br>27、什么是 Dubbo?为什么要用 Dubbo? Dubbo 工作原理？Dubbo 提供的负载均衡策略？<br>28、dubbo新节点上线怎么让其他节点感知？dubbo节点宕机怎么通知到zk？<br>29、 xxl-job工作原理？让你自己实现一个定时任务你会怎么做 ？<br>30、 聊项目警报怎么做的？<br>31、配置中心项目, 实时配置推送怎么做？如何做灰度发布？<br>32、我现在要做一个限流功能, 怎么做？ 这个限流要做成分布式的, 怎么做？假如这个限流希望做成可配置的, 需要有一个后台管理系统随意对某个 api 配置全局流量, 怎么做？<br>33、断路器内部怎么实现的? 断路器会造成写入失败, 假如我们不允许写入失败呢?<br>34、分布式锁加了超时之后有没有可能在没有释放的情况下, 被人抢走锁？怎么解决？<br>35、某一个业务中现在需要生成全局唯一的递增 ID, 并发量非常大, 怎么做？<br>36、自增主键和uuid做主键区别？ 雪花算法怎么实现的，是不是一定每次获取都递增<br>37、讲讲你理解的性能评价及测试指标？ 并发度提100倍有哪些优化的点？<br>38、算法题：M*N 横向纵向均递增的矩阵找指定数<br>39、算法题：用两个栈实现队列<br>40、算法题: N 场演唱会, 以 [{startTime, endTime}…] 的形式给出, 计算出最多能听几场演唱会？<br>41、算法题：树节点的最大距离<br>42、算法题：合并区间<br>43、平常怎么学习的？怎么看待学习和看书？<br>44、有什么想问我的</p>
<ol>
<li>通过redis解决千万级并发压力架构设计</li>
<li>项目中遇到哪些问题？设计方案？秒杀？雪崩？穿透？击穿？预热？</li>
<li>无锁化，串行化，扁平化克制高并发瓶颈！</li>
<li>redis 宕机了咋办，如何做到可用性和一致性的trad off？</li>
<li>12306抢票，微信红包，电商详情页等高频面试问题！</li>
<li>redis持久化，主从复制，分片集群在BAT中的具体使用设计</li>
<li>redis分布式锁造成的架构压力和错误的架构设计问题</li>
<li>正确用布隆过滤器，跳表skiplist，HashMap解决并发场景问题</li>
<li>如何和面试官互动获得offer</li>
<li>学习方法和面试方法分享</li>
<li>逃避认知偏差，技术诅咒，幸存者偏差</li>
</ol>
<ol>
<li>图解spring IOC的实现机制</li>
<li>spring的扩展实现一：BeanFactoryPostProcessor接口详解</li>
<li>spring的扩展实现二：BeanPostProcessor接口详解</li>
<li>必知必会的13个Bean生命周期处理机制</li>
<li>BeanFactory和FactoryBean的接口对比与实现机制</li>
<li>循环依赖问题中的三级缓存和提前暴露对象原理讲解</li>
<li>jdk和cglib动态代理的原理及源码讲解</li>
<li>Spring AOP的实现机制及扩展实现</li>
<li>巧妙回答spring源码问题，让你成为源码专家</li>
</ol>
<ol>
<li>从响应和吞吐的高维度理解什么是高并发调优</li>
<li>为什么有了synchronized还需要JUC？</li>
<li>为什么CAS和AQS是JUC的核心？</li>
<li>可见、有序、原子-深入JVM源码理解多线程三大特性</li>
<li>门闩（Latch）同步器适用于什么场景？</li>
<li>篱笆（Barrier）同步器适用于什么场景？</li>
<li>信号量（Semaphore）同步器适用于什么场景？</li>
<li>阶段同步器（Phaser）适用于什么场景？</li>
<li>原生锁支持（LockSupport）适用于什么场景？</li>
<li>三大场景在实战中运用线程池提升系统性能</li>
<li>生产环境中的线程池如何监控？</li>
<li>线程池有哪些拒绝策略？</li>
<li>有哪些拒绝策略应用在生产环境中？</li>
<li>线程池有哪些在实际中的应用场景？</li>
</ol>
<ol>
<li>高并发场景下秒杀超卖Bug复现</li>
<li>秒杀场景下JVM锁现场压测实战</li>
<li>高并发场景下，分布式锁思路分析</li>
<li>高并发秒杀场景下MySQL分布式锁实战</li>
<li>高并发秒杀场景下Redis分布式锁实战</li>
<li>如何在双十一大促中提升分布式锁性能</li>
<li>抗住双十一流量峰值的其他方案</li>
<li>从源码级别看分布式锁如何实现</li>
<li>CAP和BASE理论在分布式场景中的应用 </li>
<li>分布式锁全部代码实战压测演示</li>
</ol>
<p>「力扣」第 150 题：逆波兰表达式求值（中等）<br>「力扣」第 32 题：最长有效括号（困难）<br>「力扣」第 739 题：每日温度（中等）<br>「力扣」第 496 题：下一个更大元素 I（简单）<br>「力扣」第 84 题：柱状图中最大的矩形（困难）<br>「力扣」第 42 题：接雨水（困难）<br>「力扣」第 901 题：股票价格跨度（中等）<br>「力扣」第 581 题：最短无序连续子数组（中等）<br>「力扣」第 402 题：移掉K位数字（中等）<br>「力扣」第 321 题：拼接最大数（困难）<br>「力扣」第 1673 题：找出最具竞争力的子序列（中等）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">【当你管理一个团队，请让员工记住5个黄金定律！】</span><br><span class="line"></span><br><span class="line">1、自我管理；工作不养闲人，团队不养懒人。每天思考今天的工作价值几分，如果满分是5分，那么你当日得分是否可以达到4分？这就是日OKR自我管理！</span><br><span class="line"></span><br><span class="line">2、学会投资自己的大脑；入一行，先别惦记着能赚钱，先学着让自己值钱。先值钱，再赚钱！学习是永远不会错的投资。钱是投资出来的，首先投资大脑！</span><br><span class="line"></span><br><span class="line">3、聚焦坚持，才能到达终点；走下坡路，往往很舒服。没有哪个行业的钱是好赚的。选对行业，聚焦，坚持，才能达到终点。</span><br><span class="line"></span><br><span class="line">4、磨炼才能造就成功；干工作，没有哪个是顺利的，受点气是正常的。合理的是训练，不合理的当做磨练。</span><br><span class="line"></span><br><span class="line">5、改变态度，才能决定高度只有先改变自己的态度，才能改变人生的高度。只有先改变自己的工作态度，才能有职业高度。</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="/2021/03/01/leetcode/lru/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hezhengkui">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/01/leetcode/lru/" class="post-title-link" itemprop="url">146、LRU 缓存机制</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-01 18:45:02" itemprop="dateCreated datePublished" datetime="2021-03-01T18:45:02+08:00">2021-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-05-17 10:14:09" itemprop="dateModified" datetime="2021-05-17T10:14:09+08:00">2021-05-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>运用你所掌握的数据结构，设计和实现一个  LRU (最近最少使用) 缓存机制 。</p>
<p>实现 LRUCache 类：</p>
<p>​        LRUCache(int capacity) 以正整数作为容量 capacity 初始化 LRU 缓存<br>​        int get(int key) 如果关键字 key 存在于缓存中，则返回关键字的值，否则返回 -1 。<br>​        void put(int key, int value) 如果关键字已经存在，则变更其数据值；如果关键字不存在，则插入该组「关键字-值」。</p>
<p>当缓存容量达到上限时，它应该在写入新数据之前删除最久未使用的数据值，从而为新的数据值留出空间。</p>
<p>进阶：你是否可以在 O(1) 时间复杂度内完成这两种操作？</p>
<p>1、借助LinkedHashMap实现lru算法，只需要实现removeEldestEntry方法即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">         <span class="keyword">private</span> Map&lt;Integer, Integer&gt; cache;</span><br><span class="line">         <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> max;</span><br><span class="line"></span><br><span class="line">         <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">             max = capacity;</span><br><span class="line">             cache = <span class="keyword">new</span> es&lt;Integer, Integer&gt;(capacity, <span class="number">1.0f</span>, <span class="keyword">true</span>) &#123;</span><br><span class="line">                 <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeEldestEntry</span><span class="params">(Map.Entry eldest)</span> </span>&#123;</span><br><span class="line">                     <span class="keyword">return</span> cache.size() &gt; max;</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">             <span class="keyword">return</span> cache.getOrDefault(key, -<span class="number">1</span>);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">             cache.put(key, value);</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>2、自己基于链表+map实现lru</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> key;</span><br><span class="line">            <span class="keyword">int</span> value;</span><br><span class="line"></span><br><span class="line">            LRUCache.Node prev;</span><br><span class="line">            LRUCache.Node next;</span><br><span class="line"></span><br><span class="line">            Node(<span class="keyword">int</span> k, <span class="keyword">int</span> v) &#123;</span><br><span class="line">                <span class="keyword">this</span>.key = k;</span><br><span class="line">                <span class="keyword">this</span>.value = v;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Node() &#123;</span><br><span class="line">                <span class="keyword">this</span>.key = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">this</span>.value = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> capacity;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line">        <span class="keyword">private</span> LRUCache.Node head;</span><br><span class="line">        <span class="keyword">private</span> LRUCache.Node tail;</span><br><span class="line">        <span class="keyword">private</span> Map&lt;Integer, LRUCache.Node&gt; map;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.capacity = capacity;</span><br><span class="line">            <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">this</span>.map = <span class="keyword">new</span> HashMap();</span><br><span class="line">            head = <span class="keyword">new</span> LRUCache.Node();</span><br><span class="line">            tail = <span class="keyword">new</span> LRUCache.Node();</span><br><span class="line">            head.next = tail;</span><br><span class="line">            tail.prev = head;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">            LRUCache.Node node = map.get(key);</span><br><span class="line">            <span class="keyword">if</span> (node == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                remove(node);</span><br><span class="line">                add(node);</span><br><span class="line">                <span class="keyword">return</span> node.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">            LRUCache.Node node = map.get(key);</span><br><span class="line">            <span class="keyword">if</span> (node == <span class="keyword">null</span>) &#123;</span><br><span class="line">                node = <span class="keyword">new</span> LRUCache.Node(key, value);</span><br><span class="line">                map.put(key, node);</span><br><span class="line">                add(node);</span><br><span class="line">                count++;</span><br><span class="line">                <span class="keyword">if</span> (count &gt; capacity) &#123;</span><br><span class="line">                    LRUCache.Node toDelete = tail.prev;</span><br><span class="line">                    map.remove(toDelete.key);</span><br><span class="line">                    remove(toDelete);</span><br><span class="line">                    count--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                remove(node);</span><br><span class="line">                node.value = value;</span><br><span class="line">                add(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(LRUCache.Node node)</span> </span>&#123;</span><br><span class="line">            LRUCache.Node next = node.next;</span><br><span class="line">            LRUCache.Node prev = node.prev;</span><br><span class="line">            prev.next = next;</span><br><span class="line">            next.prev = prev;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(LRUCache.Node node)</span> </span>&#123;</span><br><span class="line">            LRUCache.Node next = head.next;</span><br><span class="line">            head.next = node;</span><br><span class="line">            node.next = next;</span><br><span class="line">            node.prev = head;</span><br><span class="line">            next.prev = node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/18/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">hezhengkui</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">72</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hezhengkui</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
